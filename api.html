<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Show API Data (Based on URL)</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        #result { white-space: pre-wrap; margin-top: 20px; }
    </style>
</head>
<body>
    <div id="result"></div>
    <script>
        // Get game type from URL query string
        function getGameTypeFromUrl() {
            const params = new URLSearchParams(window.location.search);
            let game = params.get('game');
            // Remove quotes if present
            if (game) {
                game = game.replace(/^"|"$/g, "");
            }
            return game || 'truth';
        }

        function fetchApi() {
            const game = getGameTypeFromUrl();
            // Construct API URL without the ?game="game" part
            const url = `https://api.truthordarebot.xyz/v1/${game}?rating=pg`;
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    document.getElementById('result').textContent = JSON.stringify(data, null, 2);
                })
                .catch(error => {
                    document.getElementById('result').textContent = 'Could not fetch question, try again!';
                });
        }

        // Run on page load
        fetchApi();
    </script>
</body>
</html>
